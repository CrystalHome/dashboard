<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="copyright" content="www.crystal-home.cn">
    <meta http-equiv="cache-control" content="no-store">
    <title>控制台</title>

    <link id="style" rel="stylesheet" type="text/css" href="/jqueryPlugins/jquery-easyui-1.7.0/css/easyui-them-gray.css">
    <link rel="stylesheet" type="text/css" href="/jqueryPlugins/jquery-easyui-1.7.0/css/icon.css">
    <script type="text/javascript" src="/javascript/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="/jqueryPlugins/jquery-easyui-1.7.0/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/jqueryPlugins/jquery-easyui-1.7.0/easyui-lang-zh_CN.js"></script>
</head>
<body class="easyui-layout" data-options="fit:true">
<button onclick="test()">test</button>
<hr>
    <table id="tt" />
</body>

<script type="text/javascript">
    var data=[{
        "id":1,
        "name":"C",
        "size":"",
        "date":"02/19/2010",
        "children":[{
            "id":2,
            iconCls:"icon-edit",
            "name":"Program Files",
            "size":"120 MB",
            "date":"03/20/2010",

            "children":[{
                "id":21,
                "name":"Java",
                "size":"",
                "date":"01/13/2010",
                "state":"open",
                "children":[]
            }]
        }]
    }];

    $('#tt').treegrid({
        fit:true,
        onlyLeafCheck:true,
        data:data,
        idField:'id',
        fitColumns:true,
        striped:true,
        treeField:'name',
        checkbox:true,
        lines:true,
        animate:true,
        columns:[
            [
                {field:'name',title:'name'},
                {title:'id',field:'id',width:80},
                {field:'size',title:'size',width:80},
                {field:'date',title:'date',width:80}
        ]
        ]
    });

    function test() {
        var rows = $('#tt').treegrid('getCheckedNodes')
        if(rows.length>0){
            var ids = [];
            for(var i=0;i<rows.length;i++){
                var row = rows[i];
                ids.push(row.id)
            }
            alert(ids.join(','));
        }else{
            $.messager.alert('错误','没有选择的行','error')
        }
    }
</script>

</html>